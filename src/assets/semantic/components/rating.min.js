!function(C,e,T){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),C.fn.rating=function(m){var f,v=C(this),p=v.selector||"",b=(new Date).getTime(),h=[],y=m,x="string"==typeof y,R=[].slice.call(arguments,1);return v.each(function(){var e,i=C.isPlainObject(m)?C.extend(!0,{},C.fn.rating.settings,m):C.extend({},C.fn.rating.settings),u=i.namespace,t=i.className,n=i.metadata,a=i.selector,o=(i.error,"."+u),d="module-"+u,g=this,s=C(this).data(d),r=C(this),l=r.find(a.icon),c={initialize:function(){c.verbose("Initializing rating module",i),0===l.length&&c.setup.layout(),i.interactive?c.enable():c.disable(),c.set.initialLoad(),c.set.rating(c.get.initialRating()),c.remove.initialLoad(),c.instantiate()},instantiate:function(){c.verbose("Instantiating module",i),s=c,r.data(d,c)},destroy:function(){c.verbose("Destroying previous instance",s),c.remove.events(),r.removeData(d)},refresh:function(){l=r.find(a.icon)},setup:{layout:function(){var e=c.get.maxRating(),e=C.fn.rating.settings.templates.icon(e);c.debug("Generating icon html dynamically"),r.html(e),c.refresh()}},event:{mouseenter:function(){var e=C(this);e.nextAll().removeClass(t.selected),r.addClass(t.selected),e.addClass(t.selected).prevAll().addClass(t.selected)},mouseleave:function(){r.removeClass(t.selected),l.removeClass(t.selected)},click:function(){var e=C(this),n=c.get.rating(),e=l.index(e)+1;("auto"==i.clearable?1===l.length:i.clearable)&&n==e?c.clearRating():c.set.rating(e)}},clearRating:function(){c.debug("Clearing current rating"),c.set.rating(0)},bind:{events:function(){c.verbose("Binding events"),r.on("mouseenter"+o,a.icon,c.event.mouseenter).on("mouseleave"+o,a.icon,c.event.mouseleave).on("click"+o,a.icon,c.event.click)}},remove:{events:function(){c.verbose("Removing events"),r.off(o)},initialLoad:function(){e=!1}},enable:function(){c.debug("Setting rating to interactive mode"),c.bind.events(),r.removeClass(t.disabled)},disable:function(){c.debug("Setting rating to read-only mode"),c.remove.events(),r.addClass(t.disabled)},is:{initialLoad:function(){return e}},get:{initialRating:function(){return r.data(n.rating)!==T?(r.removeData(n.rating),r.data(n.rating)):i.initialRating},maxRating:function(){return r.data(n.maxRating)!==T?(r.removeData(n.maxRating),r.data(n.maxRating)):i.maxRating},rating:function(){var e=l.filter("."+t.active).length;return c.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var n=l.eq(0<=e-1?e-1:0);r.removeClass(t.selected),l.removeClass(t.selected).removeClass(t.active),0<e&&(c.verbose("Setting current rating to",e),n.prevAll().addBack().addClass(t.active)),c.is.initialLoad()||i.onRate.call(g,e)},initialLoad:function(){e=!0}},setting:function(e,n){if(c.debug("Changing setting",e,n),C.isPlainObject(e))C.extend(!0,i,e);else{if(n===T)return i[e];C.isPlainObject(i[e])?C.extend(!0,i[e],n):i[e]=n}},internal:function(e,n){if(C.isPlainObject(e))C.extend(!0,c,e);else{if(n===T)return c[e];c[e]=n}},debug:function(){!i.silent&&i.debug&&(i.performance?c.performance.log(arguments):(c.debug=Function.prototype.bind.call(console.info,console,i.name+":"),c.debug.apply(console,arguments)))},verbose:function(){!i.silent&&i.verbose&&i.debug&&(i.performance?c.performance.log(arguments):(c.verbose=Function.prototype.bind.call(console.info,console,i.name+":"),c.verbose.apply(console,arguments)))},error:function(){i.silent||(c.error=Function.prototype.bind.call(console.error,console,i.name+":"),c.error.apply(console,arguments))},performance:{log:function(e){var n,t;i.performance&&(t=(n=(new Date).getTime())-(b||n),b=n,h.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:g,"Execution Time":t})),clearTimeout(c.performance.timer),c.performance.timer=setTimeout(c.performance.display,500)},display:function(){var e=i.name+":",t=0;b=!1,clearTimeout(c.performance.timer),C.each(h,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",p&&(e+=" '"+p+"'"),1<v.length&&(e+=" ("+v.length+")"),(console.group!==T||console.table!==T)&&0<h.length&&(console.groupCollapsed(e),console.table?console.table(h):C.each(h,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),h=[]}},invoke:function(i,e,n){var a,o,t,r=s;return e=e||R,n=g||n,"string"==typeof i&&r!==T&&(i=i.split(/[\. ]/),a=i.length-1,C.each(i,function(e,n){var t=e!=a?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(C.isPlainObject(r[t])&&e!=a)r=r[t];else{if(r[t]!==T)return o=r[t],!1;{if(!C.isPlainObject(r[n])||e==a)return r[n]!==T&&(o=r[n]),!1;r=r[n]}}})),C.isFunction(o)?t=o.apply(n,e):o!==T&&(t=o),C.isArray(f)?f.push(t):f!==T?f=[f,t]:t!==T&&(f=t),o}};x?(s===T&&c.initialize(),c.invoke(y)):(s!==T&&s.invoke("destroy"),c.initialize())}),f!==T?f:this},C.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var n=1,t="";n<=e;)t+='<i class="icon"></i>',n++;return t}}}}(jQuery,window,void document);